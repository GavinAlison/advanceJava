# gp architecture
## introduce
1. mpp并行处理， 分析型数仓，
MPP指有多个处理器并行处理统一操作。
2. 基于pg开源
3. 使用追加优化，append-optimized, 来批量转载和读取数据
4. 追加优化的存储为数据保护、压缩和行/列方向提供了校验和。
行式或者列式追加优化的表都可以被压缩。

## 查询
使用一种火山式查询引擎模型，其中的执行引擎拿到一个执行计划并且用它产生一棵
物理操作符树，然后通过物理操作符计算表，最后返回结果作为查询响应。

## 组成
有多个pg数据库组成一个greenplum数据库， 
由master 连接多个 segment 的postgresql数据库。

列式存储 与行式存储的区别
为何会有列式存储， 解决了什么问题？

解决问题， 有2个sql，一个查询，一个insert，Insert 必须要等到query完成才能操作

## 列式存储与行式存储
OLAP、列式存储(Column-oriented storage) 主要用于分析型数据库（OLAP）

OLTP、行式存储是事务型数据库（OLTP） 

传统 OLTP 数据库通常采用行式存储。以下图为例，所有的列依次排列构成一行，
以行为单位存储，再配合以 B+ 树或 SS-Table 作为索引，就能快速通过主键找到相应的行数据。

行式存储对于 OLTP 场景是很自然的：大多数操作都以实体（entity）为单位，即大多为增删改查一整行记录，
显然把一行数据存在物理上相邻的位置是个很好的选择。

对于 OLAP 场景，一个典型的查询需要遍历整个表，进行分组、排序、聚合等操作，这样一来按行存储的优势就不复存在了。
更糟糕的是，分析型 SQL 常常不会用到所有的列，而仅仅对其中某些感兴趣的列做运算，那一行中那些无关的列也不得不参与扫描。

列式存储就是为这样的需求设计的。如下图所示，同一列的数据被一个接一个紧挨着存放在一起，表的每列构成一个长数组。

显然，列式存储对于 OLTP 不友好，一行数据的写入需要同时修改多个列。但对 OLAP 场景有着很大的优势：
-   当查询语句只涉及部分列时，只需要扫描相关的列
-   每一列的数据都是相同类型的，彼此间相关性更大，对列数据压缩的效率较高






>https://zhuanlan.zhihu.com/p/35622907
>https://docs.greenplum.cn/6-0/admin_guide/intro/about_utilities.html
